(this.$WP=this.$WP||[]).push(["qm1ubp",(e,s)=>{"use strict";var a,i,t,o,r,n,c,l,u,d,p,g,f,m,_,v,h,k,b,w,E,y,N,O,x,C,P,F,B,D,R,T,L,q=()=>{},z=({triggerNext:e,onPopupDismiss:s})=>{var[o,r]=a(!1),n=d(),c=u(),l=g(),_="MOBILE"===p(),h=e||q;return i((()=>{f(c)||l?s&&s():r(!0)}),[l,_,s,n,c]),o?v(t,{children:v(D,{triggerNext:h,servletName:n.page,onDismiss:()=>{s&&s(),m(c)},trackWouldOpenExplicitPreferences:q,openExplicitPreferences:q,explicitPreferencesEnabled:!1})}):null},A=({localize:e,viewportCategory:s,onDismiss:t,triggerNext:o,openExplicitPreferences:c,trackWouldOpenExplicitPreferences:l,explicitPreferencesEnabled:u,recordEvent:d,domainName:p,appIntegrationConfig:g,login:f})=>{var[m,_]=a(!1),E=r(m);E.current=m;var[y,x]=a(!1),[C,P]=a(!1),F=n((()=>{C||P(!0)}),[C,P]),B=n((()=>{F(),d("facebook_onetap_closed"),t()}),[F,d,t]),D=n((()=>{_(!0),window.FB.Event.subscribe("xfbml.render",(()=>{d("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?x(!0):(P(!0),o())}))}),[o,d]),R=n((()=>{var{sdkUrl:e,appId:s,apiVersion:a}=g;if(e&&s&&a){var i=()=>{},t=new Promise((e=>{i=e}));!function(e,s,a){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:s,status:!0,cookie:!0}),a()}}(s,a,i),t.then(D)}else o()}),[D,g,o]);i((()=>{if(C)o();else{d("facebook_onetap_requested");var{sdkUrl:e}=g;O(e||"","MEMX"),R()}}),[R,d,o,C,g]),i((()=>{setTimeout((()=>{E.current||o()}),5e3)}),[o]);var T=n((e=>{if(!e)return null;var s=e.split(".",2)[1];if(s){var a=atob(s);try{return JSON.parse(a)}catch(e){d("facebook_onetap_parseSignedRequestFailed")}}return null}),[d]),L=n((e=>{var s=T(e);s&&s.code&&(k.set("FacebookAuthCode2",s.code,{expires:new Date((new Date).getTime()+5e3),domain:p,path:"/"}),f({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{B()},onSuccess:e=>{e&&e.userId&&(F(),e.hasCreatedMember&&(l&&l(),u&&c&&c()))}}))}),[f,F,l,B,p,u,c,T]),q=n((()=>{d("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:s}=e;s&&s.accessToken&&L(s.signedRequest)}}))}),[d,L]);if(C||!m||!y)return null;var z={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{q()}));var A="MOBILE"===s;return h("div",{className:b("oZwqD D Gi B1 Z BB","RoZcR"),style:{bottom:A?"0px":"unset"},children:[v(N,{onClick:B}),h("div",{className:"QGCww w z",children:[v("div",{className:"dpfbx Ci b f u",children:v("div",{children:z.headline})}),v("p",{className:"fFBkN Mc Nb MA NC",children:z.subhead}),v("div",{className:"ZOVpo w",children:v("div",{className:"w",children:v("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),v("div",{className:"YMLar Ci",children:v(w,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},I={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},S=({triggerNext:e,onPopupDismiss:s})=>{var{page:a}=d(),t=_.includes(a),{trackWouldOpenExplicitPreferences:o}=x("ONBOARDING","FB_ONETAP"),r=n((()=>{t&&o()}),[o,t]),c=()=>{},l=n((()=>{var a=e||c;s&&s(),a()}),[s,e]),{localize:f}=E(),h=F(),k=p(),b=C(),w=P(),N=n((e=>{w({module:"facebook_onetap",action:e,context:`${a||"unknown"}`})}),[a,w]),O=y(),D=u(),R=g(),[{data:L,fetching:q,error:z}]=B({query:I,variables:{locale:O},pause:!!R});return i((()=>{q||!z&&L&&L.Facebook_getFbConnectConfig||l()}),[q,z,L,l]),q||z||!L||!L.Facebook_getFbConnectConfig?null:v(T,{onDismiss:()=>{s&&s(),m(D)},triggerNext:l,trackWouldOpenExplicitPreferences:r,appIntegrationConfig:L.Facebook_getFbConnectConfig,localize:f,viewportCategory:k,recordEvent:N,domainName:b,login:h})},M=["UserReview","UserReviewEdit"],G=({dismiss:e})=>(i((()=>{c((()=>{null==e||e()}))}),[e]),null),U=()=>{var[e,s]=a(!1),[t,o]=a("GOOGLE_ONETAP"),r=u(),c=g(),{page:m,params:_}=d(),h="MOBILE"===p();i((()=>{M.includes(m)||f(r)||c?s(!0):e&&s(!1)}),[e,c,r,s,m,_,h]);var k=n((()=>{o("FACEBOOK_ONETAP")}),[o]),b=()=>null,w=b,E=[],y="registration_dialog";switch(t){case"GOOGLE_ONETAP":E=["google_one_tap"],w=({dismiss:e})=>v(R,{triggerNext:k,onPopupDismiss:()=>{e()}}),y="google_one_tap";break;case"FACEBOOK_ONETAP":E=["facebook_one_tap"],w=({dismiss:e})=>v(L,{onPopupDismiss:()=>{e()}}),y="facebook_one_tap"}return l({factory:b,eventTypes:[],key:"skip_marketing_interstitial",tier:50,skip:!0}),l({factory:b,eventTypes:[],key:"skip_date_picker",tier:100,skip:"HotelsFusion"!==m}),l({factory:e?({dismiss:e})=>v(G,{dismiss:e}):w,eventTypes:E,key:e?`skip_${y}`:y,tier:200}),null};return[()=>{D=o((()=>s("1j3bsm"))),R=z,T=A,L=S,e("default",U)},[e=>(a=e.useState,i=e.useEffect,t=e.Suspense,o=e.lazy,r=e.useRef,n=e.useCallback,c=e.startTransition),e=>l=e.usePopupHierarchyRender,e=>u=e.useSessionId,e=>d=e.useRoute,e=>p=e.useViewportCategory,e=>g=e.useUserId,e=>(f=e.shouldSuppressRegistrationDialog,m=e.setRegDialogDismissed,_=e.HOTEL_SERVLETS),e=>(v=e.jsx,h=e.jsxs),e=>k=e.default,e=>b=e.default,e=>(w=e.UnsafeLocalize,E=e.useLocalize,y=e.useLocale),e=>N=e.CloseIcon,e=>O=e.importScript,e=>x=e.default,e=>C=e.useDomainName,e=>P=e.useGARecorder,e=>F=e.default,e=>B=e.useQuery]]},["1o4yt4","1xo1is","1al4vi","fgwvq1","1ys6v1","52far5","cyrz7y","121h32","5gpqhx","fkji80","17thqz","1uzmmz","1q7wvk","dvdzap","qlcuu5","32pwc7","lchj5q","1mqwhq"]]);
